(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{12:function(e,t,a){e.exports={iconSpin:"ImageGallery_iconSpin__iIhIC","icon-spin":"ImageGallery_icon-spin__-r4fN"}},19:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a(0),c=a.n(n),s=a(2),o=a.n(s),i=(a(19),a(3)),u=a(4),l=a(6),h=a(5),m=a(7),p=(a(20),function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:""},e.handleInputChange=function(t){var a=t.target;e.setState({searchQuery:a.value})},e.onSubmitForm=function(t){t.preventDefault();var a=e.state.searchQuery;""!==a.trim()?e.props.onSubmit(a):m.b.warn("Input search Query"),e.setState({searchQuery:""})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state.searchQuery;return Object(r.jsx)("header",{className:"Searchbar",children:Object(r.jsxs)("form",{className:"SearchForm",onSubmit:this.onSubmitForm,children:[Object(r.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(r.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(r.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:e,onChange:this.handleInputChange})]})})}}]),a}(n.PureComponent)),j=a(9),b=a(10),g=a(13),f=a(12),d=a.n(f),y="19532775-cd1fec64673db4c80a00103d2",O="idle",v="pending",x="rejected",S="resolved",I={status:O,error:"",hits:[],page:1},Q=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state=Object(b.a)({},I),e.staticFetchOptions={perPage:12,staticURL:"https://pixabay.com/api/?image_type=photo&orientation=horizontal"},e.fetchQuery=function(){console.log("this.state.page in fetch",e.state.page);var t=e.props.searchQuery,a=e.state.page,r=e.staticFetchOptions,n=r.staticURL,c=r.perPage;e.setState({status:v});var s="".concat(n,"&q=").concat(t,"&page=").concat(a,"&per_page=").concat(c,"&key=").concat(y);return setTimeout((function(){fetch(s).then((function(e){return console.dir(e),e.ok?e.json():Promise.reject(new Error("There is no image with tag ".concat(t)))})).then((function(a){var r=a.hits;if(0===r.length)return Promise.reject(new Error("There is no image with tag ".concat(t)));e.setState((function(e){return{hits:[].concat(Object(j.a)(e.hits),Object(j.a)(r)),status:S,page:e.page+1}})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(t){return e.setState({error:t,status:x})}))}),500)},e.resetGallery=function(){console.log("this.state.page before=",e.state.page),e.setState(Object(b.a)({},I))},e}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this.props.searchQuery;e.searchQuery!==a&&(this.resetGallery(),this.fetchQuery())}},{key:"render",value:function(){var e=this.state,t=e.hits,a=e.error,n=e.status,c=e.page;if(n===O)return Object(r.jsx)("h1",{children:"Input tag to find images"});if(n===v){if(1===c)return Object(r.jsx)(g.a,{size:"36",className:d.a.iconSpin});if(c>1)return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.id,a=e.webformatURL,n=e.largeImageURL,c=e.tags;return Object(r.jsx)("li",{className:"ImageGalleryItem",children:Object(r.jsx)("img",{src:a,alt:c,className:"ImageGalleryItem-image","data-full-size":n})},t)}))}),Object(r.jsx)("button",{type:"button",onClick:this.fetchQuery,children:"More"})]})}return n===x?Object(r.jsx)("h1",{children:a.message}):n===S?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.id,a=e.webformatURL,n=e.largeImageURL,c=e.tags;return Object(r.jsx)("li",{className:"ImageGalleryItem",children:Object(r.jsx)("img",{src:a,alt:c,className:"ImageGalleryItem-image","data-full-size":n})},t)}))}),Object(r.jsx)("button",{type:"button",onClick:this.fetchQuery,children:"More"})]}):void 0}}]),a}(n.PureComponent),w=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:""},e.setSearchQuery=function(t){e.setState({searchQuery:t})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this.state.searchQuery;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(p,{onSubmit:this.setSearchQuery}),Object(r.jsx)(Q,{searchQuery:e}),Object(r.jsx)(m.a,{autoClose:3e3})]})}}]),a}(n.Component);w.defaultProps={};var N=w,k=document.querySelector("#root");o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(N,{})}),k)}},[[23,1,2]]]);
//# sourceMappingURL=main.b5d301c4.chunk.js.map