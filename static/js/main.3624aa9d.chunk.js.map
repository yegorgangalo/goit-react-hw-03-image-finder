{"version":3,"sources":["components/ImageGallery/ImageGallery.module.css","components/SearchBar/SearchBar.js","components/Modal/Modal.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGalleryList/ImageGalleryList.js","components/Button/Button.js","components/ImageGallery/ImageGallery.js","App.jsx","index.js","components/Button/Button.module.css"],"names":["module","exports","SearchBar","state","searchQuery","handleInputChange","target","setState","value","onSubmitForm","event","preventDefault","trim","props","onSubmit","toast","warn","reset","this","className","type","autoComplete","autoFocus","placeholder","onChange","PureComponent","modalRoot","document","querySelector","Modal","keydownCloseModal","code","onClose","backdropCloseModal","currentTarget","window","addEventListener","removeEventListener","src","alt","createPortal","onClick","ImageGalleryItem","showModal","toggleModal","fullSize","ImageGalleryList","imgArray","map","id","webformatURL","largeImageURL","tags","Button","onClickFetch","show","s","button","size","iconSpin","iconSpinBtn","keyAPI","IDLE","PENDING","REJECTED","RESOLVED","defaultState","status","error","totalHitsLength","page","ImageGallery","staticFetchOptions","perPage","staticURL","fetchQuery","url","setTimeout","fetch","then","res","ok","json","Promise","reject","Error","hits","totalHits","length","prevState","incrementPage","catch","resetGallery","callback","buttonLoadType","btnType","prevProps","scrollTo","top","documentElement","scrollHeight","behavior","buttonType","info","message","App","setSearchQuery","autoClose","Component","defaultProps","root","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.3624aa9d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"info\":\"ImageGallery_info__MGNMe\"};","import React, { PureComponent } from 'react';\nimport { toast } from 'react-toastify';\n\nclass SearchBar extends PureComponent {\n    state = {\n      searchQuery:'',\n    }\n\n  handleInputChange = ({ target }) => {\n      this.setState({\n        searchQuery: target.value\n      })\n  }\n\n  onSubmitForm = (event) => {\n    event.preventDefault();\n    const { searchQuery } = this.state;\n    searchQuery.trim() !== '' ? this.props.onSubmit(searchQuery) : toast.warn('Input search Query');\n    this.reset();\n  }\n\n  reset = () => this.setState({ searchQuery: '' })\n\n    render() {\n      const { searchQuery } = this.state;\n        return (\n            <header className=\"Searchbar\">\n              <form className=\"SearchForm\" onSubmit={this.onSubmitForm}>\n                <button type=\"submit\" className=\"SearchForm-button\">\n                  <span className=\"SearchForm-button-label\">Search</span>\n                </button>\n\n                <input\n                  className=\"SearchForm-input\"\n                  type=\"text\"\n                  autoComplete=\"off\"\n                  autoFocus\n                  placeholder=\"Search images and photos\"\n                  value={searchQuery}\n                  onChange={this.handleInputChange}\n                />\n              </form>\n            </header>\n        )\n    }\n}\n\nexport default SearchBar;","import React, { PureComponent } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends PureComponent {\n\n    componentDidMount() {\n        window.addEventListener('keydown', this.keydownCloseModal);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('keydown', this.keydownCloseModal);\n    }\n\n    keydownCloseModal = ({ code }) => {\n        code === \"Escape\" && this.props.onClose();\n    }\n\n    backdropCloseModal = ({ target, currentTarget }) => {\n        // target === currentTarget && this.props.onClose();\n        this.props.onClose()\n    }\n\n    render() {\n        const { src, alt } = this.props;\n        return createPortal(\n            <div className=\"Overlay\" onClick={this.backdropCloseModal}>\n              <div className=\"Modal\">\n                <img src={src} alt={alt} />\n              </div>\n            </div>\n        , modalRoot)\n    }\n}\n\nexport default Modal;","import React, {PureComponent} from 'react';\nimport Modal from '../Modal'\n\nclass ImageGalleryItem extends PureComponent {\n    state = {\n        showModal: false,\n    }\n\n    toggleModal = () => {\n      this.setState(({ showModal }) => ({\n        showModal: !showModal,\n      }))\n    }\n\n    render() {\n        const { showModal } = this.state;\n        const { src, alt, fullSize } = this.props;\n        return (\n            <>\n            <img src={src} alt={alt} onClick={this.toggleModal} className=\"ImageGalleryItem-image\" />\n            {showModal && ( <Modal onClose={this.toggleModal} src={fullSize} alt={alt} /> )}\n            </>\n        )\n    }\n}\n\nexport default ImageGalleryItem;","import React from 'react';\nimport ImageGalleryItem from '../ImageGalleryItem'\n\nfunction ImageGalleryList ({imgArray}) {\n    return (\n        <ul className=\"ImageGallery\">\n            {imgArray.map(({ id, webformatURL, largeImageURL, tags }) => {\n                return (\n                    <li className=\"ImageGalleryItem\" key={id}>\n                        <ImageGalleryItem src={webformatURL} alt={tags} fullSize={largeImageURL} />\n                    </li>\n                )\n            })}\n        </ul>\n    )\n}\n\nexport default ImageGalleryList;","import React from 'react';\nimport { ImSpinner6 } from 'react-icons/im';\nimport s from './Button.module.css';\n\nfunction Button({ onClickFetch = null, type = 'more', show = true }) {\n    // if (show === false) {return <></>}\n    if (type === 'hidden') {return <></>}\n    if (type === 'more') {\n        return <button className={s.button} type=\"button\" onClick={onClickFetch}>Load More</button>;\n    }\n    if (type === 'spinner') {\n        return <ImSpinner6 size=\"36\" className={s.iconSpin} />;\n    }\n    if (type === 'loading') {\n        return (\n            <button className={s.button} type=\"button\">\n                <span>\n                    <ImSpinner6 size=\"16\" className={s.iconSpinBtn} />\n                </span>\n                <span>Loading...</span>\n            </button>)\n    }\n}\n\nexport default Button;","import React, { PureComponent } from 'react';\nimport s from './ImageGallery.module.css';\nimport ImageGalleryList from '../ImageGalleryList';\nimport Button from '../Button';\n// import PropTypes from 'prop-types';\n\nconst keyAPI = '19532775-cd1fec64673db4c80a00103d2';\nconst status = {\n    IDLE: 'idle',\n    PENDING: 'pending',\n    REJECTED: 'rejected',\n    RESOLVED: 'resolved',\n}\nconst { IDLE, PENDING, REJECTED, RESOLVED } = status;\nconst defaultState = {\n        status: IDLE,\n        error: '',\n        imgArray: [],\n        totalHitsLength: 0,\n        page: 1,\n    }\n\nclass ImageGallery extends PureComponent {\n\n    state = { ...defaultState }\n\n    staticFetchOptions = {\n        perPage: 12,\n        staticURL: 'https://pixabay.com/api/?image_type=photo&orientation=horizontal',\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevProps.searchQuery !== this.props.searchQuery) {\n            this.resetGallery(this.fetchQuery);\n        }\n        if (prevState.imgArray !== this.state.imgArray) {\n            window.scrollTo({\n              top: document.documentElement.scrollHeight,\n              behavior: 'smooth',\n            });\n        }\n    }\n\n    fetchQuery = () => {\n        this.setState({ status: PENDING });\n        const { searchQuery } = this.props;\n        const { page, imgArray } = this.state;\n        const { staticURL, perPage } = this.staticFetchOptions;\n        const url = `${staticURL}&q=${searchQuery}&page=${page}&per_page=${perPage}&key=${keyAPI}`;\n\n    return setTimeout(() => {\n      fetch(url)\n      .then(res => {\n        //   console.dir(res);\n          if (!res.ok) {\n              return Promise.reject(new Error(`There is no image with tag ${searchQuery}`));\n          }\n          return res.json();\n      })\n          .then(({ hits, totalHits }) => {\n            //   console.log(totalHits);\n        if (hits.length===0 && imgArray.length===0) {\n              return Promise.reject(new Error(`There is no image with tag: ${searchQuery}`));\n          }\n        this.setState((prevState) => ({\n            imgArray: [...prevState.imgArray, ...hits],\n            totalHits: totalHits,\n            status: RESOLVED,\n        }));\n        this.incrementPage();\n      }\n      )\n      .catch(error => this.setState({ error, status: REJECTED }))\n      }, 500)\n    }\n\n    incrementPage = () => this.setState((prevState) => ({ page: prevState.page +1 }));\n\n    resetGallery = (callback = null) => this.setState({ ...defaultState }, callback);\n\n    buttonLoadType = () => {\n        const { imgArray, page, totalHits, status } = this.state;\n        let btnType = 'more';\n        if(page === 1) {btnType = 'spinner'};\n        if (status === PENDING && page>1) { btnType = 'loading' };\n        if (imgArray.length >= totalHits) { btnType = 'hidden' };\n        return btnType;\n    }\n\n    render() {\n        const { imgArray, error, status } = this.state;\n        const buttonType = this.buttonLoadType();\n\n        if (status === IDLE) {\n            return <h1 className={s.info}>Input tag to find images</h1>\n        }\n        if (status === PENDING) {\n            return (\n                <>\n                <ImageGalleryList imgArray={imgArray}/>\n                <Button type={buttonType}/>\n                </>\n            )\n        }\n        if (status === REJECTED) {\n            return <h1 className={s.info}>{error.message}</h1>\n        }\n        if (status === RESOLVED) {\n            return (\n                <>\n                <ImageGalleryList imgArray={imgArray}/>\n                <Button type={buttonType} onClickFetch={this.fetchQuery} />\n                </>\n            )\n        }\n    }\n}\n\nexport default ImageGallery;","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport SearchBar from './components/SearchBar';\nimport ImageGallery from './components/ImageGallery';\n\nclass App extends Component {\n    static defaultProps = {\n      //\n    }\n\n    static propTypes = {\n        //\n    }\n\n    state = {\n      searchQuery: '',\n    }\n\n    componentDidMount(){\n\n    }\n\n    componentDidUpdate(prevProps, prevState){\n    }\n\n    setSearchQuery = (searchQuery) => {\n      this.setState({ searchQuery });\n    }\n\n    render() {\n      const { searchQuery } = this.state;\n      return (<>\n        <SearchBar onSubmit={this.setSearchQuery} />\n        <ImageGallery searchQuery={searchQuery} />\n        <ToastContainer autoClose={3000}/>\n        </>)\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App.jsx';\n\nconst root = document.querySelector('#root');\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  root,\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3QF_k\",\"iconSpin\":\"Button_iconSpin__3vRRA\",\"icon-spin\":\"Button_icon-spin__18vUR\",\"iconSpinBtn\":\"Button_iconSpinBtn__3d432\"};"],"sourceRoot":""}