(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,n){e.exports={info:"ImageGallery_info__MGNMe"}},20:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),o=n.n(r),c=n(6),s=n.n(c),i=(n(20),n(2)),u=n(3),l=n(5),h=n(4),j=n(8),p=(n(21),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:""},e.handleInputChange=function(t){var n=t.target;e.setState({searchQuery:n.value})},e.onSubmitForm=function(t){t.preventDefault();var n=e.state.searchQuery;""!==n.trim()?e.props.onSubmit(n):j.b.warn("Input search Query"),e.reset()},e.reset=function(){return e.setState({searchQuery:""})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state.searchQuery;return Object(a.jsx)("header",{className:"Searchbar",children:Object(a.jsxs)("form",{className:"SearchForm",onSubmit:this.onSubmitForm,children:[Object(a.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(a.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(a.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:e,onChange:this.handleInputChange})]})})}}]),n}(r.PureComponent)),d=n(11),m=n(13),b=n(10),g=n.n(b),y=document.querySelector("#modal-root"),f=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).keydownCloseModal=function(t){"Escape"===t.code&&e.props.onClose()},e.backdropCloseModal=function(t){t.target,t.currentTarget;e.props.onClose()},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.keydownCloseModal)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.keydownCloseModal)}},{key:"render",value:function(){var e=this.props,t=e.src,n=e.alt;return Object(c.createPortal)(Object(a.jsx)("div",{className:"Overlay",onClick:this.backdropCloseModal,children:Object(a.jsx)("div",{className:"Modal",children:Object(a.jsx)("img",{src:t,alt:n})})}),y)}}]),n}(r.PureComponent),O=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={showModal:!1},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state.showModal,t=this.props,n=t.src,r=t.alt,o=t.fullSize;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("img",{src:n,alt:r,onClick:this.toggleModal,className:"ImageGalleryItem-image"}),e&&Object(a.jsx)(f,{onClose:this.toggleModal,src:o,alt:r})]})}}]),n}(r.PureComponent);var v=function(e){var t=e.imgArray;return Object(a.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.id,n=e.webformatURL,r=e.largeImageURL,o=e.tags;return Object(a.jsx)("li",{className:"ImageGalleryItem",children:Object(a.jsx)(O,{src:n,alt:o,fullSize:r})},t)}))})},x=n(12),S=n(7),w=n.n(S);var k=function(e){var t=e.onClickFetch,n=void 0===t?null:t,r=e.type,o=void 0===r?"more":r;return e.show,"hidden"===o?Object(a.jsx)(a.Fragment,{}):"more"===o?Object(a.jsx)("button",{className:w.a.button,type:"button",onClick:n,children:"Load More"}):"spinner"===o?Object(a.jsx)(x.a,{size:"36",className:w.a.iconSpin}):"loading"===o?Object(a.jsxs)("button",{className:w.a.button,type:"button",children:[Object(a.jsx)("span",{children:Object(a.jsx)(x.a,{size:"16",className:w.a.iconSpinBtn})}),Object(a.jsx)("span",{children:"Loading..."})]}):void 0},C="19532775-cd1fec64673db4c80a00103d2",M="idle",Q="pending",_="rejected",A="resolved",F={status:M,error:"",imgArray:[],totalHitsLength:0,page:1},N=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state=Object(m.a)({},F),e.staticFetchOptions={perPage:12,staticURL:"https://pixabay.com/api/?image_type=photo&orientation=horizontal"},e.fetchQuery=function(){e.setState({status:Q});var t=e.props.searchQuery,n=e.state,a=n.page,r=n.imgArray,o=e.staticFetchOptions,c=o.staticURL,s=o.perPage,i="".concat(c,"&q=").concat(t,"&page=").concat(a,"&per_page=").concat(s,"&key=").concat(C);return setTimeout((function(){fetch(i).then((function(e){return e.ok?e.json():Promise.reject(new Error("There is no image with tag ".concat(t)))})).then((function(n){var a=n.hits,o=n.totalHits;if(0===a.length&&0===r.length)return Promise.reject(new Error("There is no image with tag: ".concat(t)));e.setState((function(e){return{imgArray:[].concat(Object(d.a)(e.imgArray),Object(d.a)(a)),totalHits:o,status:A}})),e.incrementPage()})).catch((function(t){return e.setState({error:t,status:_})}))}),500)},e.incrementPage=function(){return e.setState((function(e){return{page:e.page+1}}))},e.resetGallery=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e.setState(Object(m.a)({},F),t)},e.buttonLoadType=function(){var t=e.state,n=t.imgArray,a=t.page,r=t.totalHits,o="more";return 1===a&&(o="spinner"),t.status===Q&&a>1&&(o="loading"),n.length>=r&&(o="hidden"),o},e}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(e,t){e.searchQuery!==this.props.searchQuery&&this.resetGallery(this.fetchQuery),t.imgArray!==this.state.imgArray&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var e=this.state,t=e.imgArray,n=e.error,r=e.status,o=this.buttonLoadType();return r===M?Object(a.jsx)("h1",{className:g.a.info,children:"Input tag to find images"}):r===Q?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(v,{imgArray:t}),Object(a.jsx)(k,{type:o})]}):r===_?Object(a.jsx)("h1",{className:g.a.info,children:n.message}):r===A?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(v,{imgArray:t}),Object(a.jsx)(k,{type:o,onClickFetch:this.fetchQuery})]}):void 0}}]),n}(r.PureComponent),P=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:""},e.setSearchQuery=function(t){e.setState({searchQuery:t})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this.state.searchQuery;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(p,{onSubmit:this.setSearchQuery}),Object(a.jsx)(N,{searchQuery:e}),Object(a.jsx)(j.a,{autoClose:3e3})]})}}]),n}(r.Component);P.defaultProps={};var I=P,L=document.querySelector("#root");s.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(I,{})}),L)},7:function(e,t,n){e.exports={button:"Button_button__3QF_k",iconSpin:"Button_iconSpin__3vRRA","icon-spin":"Button_icon-spin__18vUR",iconSpinBtn:"Button_iconSpinBtn__3d432"}}},[[24,1,2]]]);
//# sourceMappingURL=main.3624aa9d.chunk.js.map