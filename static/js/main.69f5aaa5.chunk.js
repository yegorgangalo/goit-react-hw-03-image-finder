(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={info:"ImageGallery_info__MGNMe"}},20:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),o=a(2),s=a.n(o),i=(a(20),a(3)),u=a(4),l=a(6),h=a(5),m=a(8),p=(a(21),function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:""},e.handleInputChange=function(t){var a=t.target;e.setState({searchQuery:a.value})},e.onSubmitForm=function(t){t.preventDefault();var a=e.state.searchQuery;""!==a.trim()?e.props.onSubmit(a):m.b.warn("Input search Query"),console.log("before",e.state.searchQuery),e.reset(),console.log("after",e.state.searchQuery)},e.reset=function(){return e.setState({searchQuery:""})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state.searchQuery;return Object(n.jsx)("header",{className:"Searchbar",children:Object(n.jsxs)("form",{className:"SearchForm",onSubmit:this.onSubmitForm,children:[Object(n.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(n.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(n.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:e,onChange:this.handleInputChange})]})})}}]),a}(r.PureComponent)),j=a(11),b=a(13),g=a(10),d=a.n(g);var y=function(e){var t=e.imgArray;return Object(n.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.id,a=e.webformatURL,r=e.largeImageURL,c=e.tags;return Object(n.jsx)("li",{className:"ImageGalleryItem",children:Object(n.jsx)("img",{src:a,alt:c,className:"ImageGalleryItem-image","data-full-size":r})},t)}))})},f=a(12),O=a(7),v=a.n(O);var x=function(e){var t=e.onClickFetch,a=void 0===t?null:t,r=e.type,c=void 0===r?"more":r;return e.show,"hidden"===c?Object(n.jsx)(n.Fragment,{}):"more"===c?Object(n.jsx)("button",{className:v.a.button,type:"button",onClick:a,children:"Load More"}):"spinner"===c?Object(n.jsx)(f.a,{size:"36",className:v.a.iconSpin}):"loading"===c?Object(n.jsxs)("button",{className:v.a.button,type:"button",children:[Object(n.jsx)("span",{children:Object(n.jsx)(f.a,{size:"16",className:v.a.iconSpinBtn})}),Object(n.jsx)("span",{children:"Loading..."})]}):void 0},S="19532775-cd1fec64673db4c80a00103d2",Q="idle",_="pending",w="rejected",F="resolved",A={status:Q,error:"",imgArray:[],totalHitsLength:0,page:1},N=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state=Object(b.a)({},A),e.staticFetchOptions={perPage:12,staticURL:"https://pixabay.com/api/?image_type=photo&orientation=horizontal"},e.fetchQuery=function(){e.setState({status:_});var t=e.props.searchQuery,a=e.state,n=a.page,r=a.imgArray,c=e.staticFetchOptions,o=c.staticURL,s=c.perPage,i="".concat(o,"&q=").concat(t,"&page=").concat(n,"&per_page=").concat(s,"&key=").concat(S);return setTimeout((function(){fetch(i).then((function(e){return e.ok?e.json():Promise.reject(new Error("There is no image with tag ".concat(t)))})).then((function(a){var n=a.hits,c=a.totalHits;if(0===n.length&&0===r.length)return Promise.reject(new Error("There is no image with tag: ".concat(t)));e.setState((function(e){return{imgArray:[].concat(Object(j.a)(e.imgArray),Object(j.a)(n)),totalHits:c,status:F}})),e.incrementPage()})).catch((function(t){return e.setState({error:t,status:w})}))}),500)},e.incrementPage=function(){return e.setState((function(e){return{page:e.page+1}}))},e.resetGallery=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e.setState(Object(b.a)({},A),t)},e.buttonLoadType=function(){var t=e.state,a=t.imgArray,n=t.page,r=t.totalHits,c="more";return 1===n&&(c="spinner"),t.status===_&&n>1&&(c="loading"),a.length>=r&&(c="hidden"),c},e}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e,t){e.searchQuery!==this.props.searchQuery&&this.resetGallery(this.fetchQuery),t.imgArray!==this.state.imgArray&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var e=this.state,t=e.imgArray,a=e.error,r=e.status,c=this.buttonLoadType();return r===Q?Object(n.jsx)("h1",{className:d.a.info,children:"Input tag to find images"}):r===_?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(y,{imgArray:t}),Object(n.jsx)(x,{type:c})]}):r===w?Object(n.jsx)("h1",{className:d.a.info,children:a.message}):r===F?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(y,{imgArray:t}),Object(n.jsx)(x,{type:c,onClickFetch:this.fetchQuery})]}):void 0}}]),a}(r.PureComponent),k=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:""},e.setSearchQuery=function(t){e.setState({searchQuery:t})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this.state.searchQuery;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(p,{onSubmit:this.setSearchQuery}),Object(n.jsx)(N,{searchQuery:e}),Object(n.jsx)(m.a,{autoClose:3e3})]})}}]),a}(r.Component);k.defaultProps={};var C=k,I=document.querySelector("#root");s.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(C,{})}),I)},7:function(e,t,a){e.exports={button:"Button_button__3QF_k",iconSpin:"Button_iconSpin__3vRRA","icon-spin":"Button_icon-spin__18vUR",iconSpinBtn:"Button_iconSpinBtn__3d432"}}},[[24,1,2]]]);
//# sourceMappingURL=main.69f5aaa5.chunk.js.map