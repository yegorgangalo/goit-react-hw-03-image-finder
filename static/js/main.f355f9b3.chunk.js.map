{"version":3,"sources":["components/Notification/Notification.module.css","components/SearchBar/SearchBar.js","APIservice/APIservice.js","components/Notification/Notification.js","components/Modal/Modal.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGalleryList/ImageGalleryList.js","components/Button/Button.js","components/ImageGallery/ImageGallery.js","App.jsx","index.js","components/Button/Button.module.css"],"names":["module","exports","SearchBar","state","searchQuery","handleInputChange","target","setState","value","onSubmitForm","event","preventDefault","trim","props","onSubmit","toast","warn","reset","this","className","type","autoComplete","autoFocus","placeholder","onChange","PureComponent","staticURL","perPage","keyAPI","imageAPI","query","page","url","fetch","then","res","ok","json","Promise","reject","Error","Notification","text","s","info","modalRoot","document","querySelector","Modal","keydownCloseModal","code","onClose","backdropCloseModal","currentTarget","window","addEventListener","removeEventListener","src","alt","createPortal","onClick","ImageGalleryItem","showModal","toggleModal","fullSize","ImageGalleryList","imgArray","map","id","webformatURL","largeImageURL","tags","Button","onClickFetch","button","size","iconSpin","iconSpinBtn","IDLE","PENDING","REJECTED","RESOLVED","defaultState","status","imgFetched","imgTotal","error","ImageGallery","fetchQuery","setTimeout","hits","totalHits","length","prevState","incrementPage","catch","resetGallery","callback","buttonLoadType","btnType","prevProps","scrollTo","top","documentElement","scrollHeight","behavior","buttonType","message","App","setSearchQuery","autoClose","Component","root","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.f355f9b3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"info\":\"Notification_info__3hJal\"};","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\n\nclass SearchBar extends PureComponent {\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  }\n\n    state = {\n      searchQuery:'',\n    }\n\n  handleInputChange = ({ target }) => {\n      this.setState({\n        searchQuery: target.value\n      })\n  }\n\n  onSubmitForm = (event) => {\n    event.preventDefault();\n    const { searchQuery } = this.state;\n    searchQuery.trim() !== '' ? this.props.onSubmit(searchQuery) : toast.warn('Input search Query');\n    this.reset();\n  }\n\n  reset = () => this.setState({ searchQuery: '' })\n\n    render() {\n      const { searchQuery } = this.state;\n        return (\n            <header className=\"Searchbar\">\n              <form className=\"SearchForm\" onSubmit={this.onSubmitForm}>\n                <button type=\"submit\" className=\"SearchForm-button\">\n                  <span className=\"SearchForm-button-label\">Search</span>\n                </button>\n\n                <input\n                  className=\"SearchForm-input\"\n                  type=\"text\"\n                  autoComplete=\"off\"\n                  autoFocus\n                  placeholder=\"Search images and photos\"\n                  value={searchQuery}\n                  onChange={this.handleInputChange}\n                />\n              </form>\n            </header>\n        )\n    }\n}\n\nexport default SearchBar;","const staticFetchOptions = {\n    perPage: 12,\n    staticURL: 'https://pixabay.com/api/?image_type=photo&orientation=horizontal',\n    keyAPI: '19532775-cd1fec64673db4c80a00103d2',\n}\n\nconst { staticURL, perPage, keyAPI } = staticFetchOptions;\n\nexport function imageAPI (query, page) {\n    const url = `${staticURL}&q=${query}&page=${page}&per_page=${perPage}&key=${keyAPI}`;\n    return fetch(url)\n        .then(res => {\n            if (!res.ok) {\n                return Promise.reject(new Error(`There is no image with tag ${query}`));\n            }\n            return res.json();\n        })\n}","import React from 'react';\nimport s from './Notification.module.css'\n\nexport default function Notification({text}) {\n    return <h1 className={s.info}>{text}</h1>\n}","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends PureComponent {\n    static propTypes = {\n        onClose: PropTypes.func.isRequired,\n    }\n\n    componentDidMount() {\n        window.addEventListener('keydown', this.keydownCloseModal);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('keydown', this.keydownCloseModal);\n    }\n\n    keydownCloseModal = ({ code }) => {\n        code === \"Escape\" && this.props.onClose();\n    }\n\n    backdropCloseModal = ({ target, currentTarget }) => {\n        // target === currentTarget && this.props.onClose();\n        this.props.onClose()\n    }\n\n    render() {\n        const { src, alt } = this.props;\n        return createPortal(\n            <div className=\"Overlay\" onClick={this.backdropCloseModal}>\n              <div className=\"Modal\">\n                <img src={src} alt={alt} />\n              </div>\n            </div>\n        , modalRoot)\n    }\n}\n\nexport default Modal;","import React, {PureComponent} from 'react';\nimport Modal from '../Modal'\n\nclass ImageGalleryItem extends PureComponent {\n    state = {\n        showModal: false,\n    }\n\n    toggleModal = () => {\n      this.setState(({ showModal }) => ({\n        showModal: !showModal,\n      }))\n    }\n\n    render() {\n        const { showModal } = this.state;\n        const { src, alt, fullSize } = this.props;\n        return (\n            <>\n            <img src={src} alt={alt} onClick={this.toggleModal} className=\"ImageGalleryItem-image\" />\n            {showModal && ( <Modal onClose={this.toggleModal} src={fullSize} alt={alt} /> )}\n            </>\n        )\n    }\n}\n\nexport default ImageGalleryItem;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ImageGalleryItem from '../ImageGalleryItem'\n\nfunction ImageGalleryList ({imgArray}) {\n    return (\n        <ul className=\"ImageGallery\">\n            {imgArray.map(({ id, webformatURL, largeImageURL, tags }) => {\n                return (\n                    <li className=\"ImageGalleryItem\" key={id+webformatURL}>\n                        <ImageGalleryItem src={webformatURL} alt={tags} fullSize={largeImageURL} />\n                    </li>\n                )\n            })}\n        </ul>\n    )\n}\n\nImageGalleryList.propTypes = {\n    imgArray: PropTypes.arrayOf(PropTypes.shape({\n        id: PropTypes.number.isRequired,\n        webformatURL: PropTypes.string.isRequired,\n        largeImageURL: PropTypes.string.isRequired,\n        tags: PropTypes.string.isRequired,\n    }))\n}\n\nexport default ImageGalleryList;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { ImSpinner6 } from 'react-icons/im';\nimport s from './Button.module.css';\n\nfunction Button({ onClickFetch = null, type = 'more'}) {\n    if (type === 'hidden') {return <></>}\n    if (type === 'more') {\n        return <button className={s.button} type=\"button\" onClick={onClickFetch}>Load More</button>;\n    }\n    if (type === 'spinner') {\n        return <ImSpinner6 size=\"36\" className={s.iconSpin} />;\n    }\n    if (type === 'loading') {\n        return (\n            <button className={s.button} type=\"button\">\n                <span>\n                    <ImSpinner6 size=\"16\" className={s.iconSpinBtn} />\n                </span>\n                <span>Loading...</span>\n            </button>)\n    }\n}\n\nButton.propTypes = {\n    onClickFetch: PropTypes.func,\n    type: PropTypes.string,\n}\n\nexport default Button;","import React, { PureComponent } from 'react';\nimport { imageAPI } from '../../APIservice';\nimport Notification from '../Notification'\nimport ImageGalleryList from '../ImageGalleryList';\nimport Button from '../Button';\nimport PropTypes from 'prop-types';\n\nconst status = {\n    IDLE: 'idle',\n    PENDING: 'pending',\n    REJECTED: 'rejected',\n    RESOLVED: 'resolved',\n}\nconst { IDLE, PENDING, REJECTED, RESOLVED } = status;\n\nconst defaultState = {\n        status: IDLE,\n        imgFetched: [],\n        imgTotal: 0,\n        page: 1,\n        error: '',\n    }\n\nclass ImageGallery extends PureComponent {\n    static propTypes = {\n        searchQuery: PropTypes.string.isRequired,\n    }\n\n    state = { ...defaultState }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevProps.searchQuery !== this.props.searchQuery) {\n            this.resetGallery(this.fetchQuery);\n        }\n        if (prevState.imgFetched !== this.state.imgFetched) {\n            window.scrollTo({\n              top: document.documentElement.scrollHeight,\n              behavior: 'smooth',\n            });\n        }\n    }\n\n    fetchQuery = () => {\n        this.setState({ status: PENDING });\n        const { searchQuery } = this.props;\n        const { page, imgFetched } = this.state;\n\n    return setTimeout(() => {\n        imageAPI(searchQuery, page)\n          .then(({ hits, totalHits }) => {\n            if (hits.length===0 && imgFetched.length===0) {\n                  return Promise.reject(new Error(`There is no image with tag: ${searchQuery}`));\n              }\n            this.setState((prevState) => ({\n                imgFetched: [...prevState.imgFetched, ...hits],\n                imgTotal: totalHits,\n                status: RESOLVED,\n            }));\n            this.incrementPage();\n          })\n          .catch(error => this.setState({ error, status: REJECTED }))\n          }, 500)\n    }\n\n    incrementPage = () => this.setState((prevState) => ({ page: prevState.page +1 }));\n\n    resetGallery = (callback = null) => this.setState({ ...defaultState }, callback);\n\n    buttonLoadType = () => {\n        const { imgFetched, page, totalHits, status } = this.state;\n        let btnType = 'more';\n        if(page === 1) {btnType = 'spinner'};\n        if (status === PENDING && page>1) { btnType = 'loading' };\n        if (imgFetched.length >= totalHits) { btnType = 'hidden' };\n        return btnType;\n    }\n\n    render() {\n        const { imgFetched, error, status } = this.state;\n        const buttonType = this.buttonLoadType();\n\n        if (status === IDLE) {\n            return <Notification text=\"Input tag to find images\"/>\n        }\n        if (status === PENDING) {\n            return (\n                <>\n                <ImageGalleryList imgArray={imgFetched}/>\n                <Button type={buttonType}/>\n                </>\n            )\n        }\n        if (status === REJECTED) {\n            return <Notification text={error.message}/>\n        }\n        if (status === RESOLVED) {\n            return (\n                <>\n                <ImageGalleryList imgArray={imgFetched}/>\n                <Button type={buttonType} onClickFetch={this.fetchQuery} />\n                </>\n            )\n        }\n    }\n}\n\nexport default ImageGallery;","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport SearchBar from './components/SearchBar';\nimport ImageGallery from './components/ImageGallery';\n\nclass App extends Component {\n    state = {\n      searchQuery: '',\n    }\n\n    setSearchQuery = (searchQuery) => {\n      this.setState({ searchQuery });\n    }\n\n    render() {\n      const { searchQuery } = this.state;\n      return (<>\n        <SearchBar onSubmit={this.setSearchQuery} />\n        <ImageGallery searchQuery={searchQuery} />\n        <ToastContainer autoClose={3000}/>\n        </>)\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App.jsx';\n\nconst root = document.querySelector('#root');\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  root,\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3QF_k\",\"iconSpin\":\"Button_iconSpin__3vRRA\",\"icon-spin\":\"Button_icon-spin__18vUR\",\"iconSpinBtn\":\"Button_iconSpinBtn__3d432\"};"],"sourceRoot":""}